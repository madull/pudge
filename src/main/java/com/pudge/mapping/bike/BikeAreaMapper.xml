<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pudge.dao.bike.BikeAreaMapper">

<!-- 以下两个<cache>标签二选一,第一个可以输出日志,第二个不输出日志 -->
  <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>
  <!-- <cache type="org.mybatis.caches.ehcache.EhcacheCache"/> -->


  <resultMap id="BaseResultMap" type="com.pudge.entity.bike.BikeArea">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 19 18:04:28 CST 2015.
    -->
    <id column="bike_area_uid" jdbcType="VARCHAR" property="bikeAreaUid" />
    <result column="bike_area_no" jdbcType="VARCHAR" property="bikeAreaNo" />
    <result column="bike_area_name" jdbcType="VARCHAR" property="bikeAreaName" />
    <result column="area_rent_num" jdbcType="INTEGER" property="areaRentNum" />
    <result column="area_return_num" jdbcType="INTEGER" property="areaReturnNum" />
    <result column="service_time" jdbcType="VARCHAR" property="serviceTime" />
    <result column="area_on_duty" jdbcType="INTEGER" property="areaOnDuty" />
    <result column="area_location" jdbcType="VARCHAR" property="areaLocation" />
    <result column="service_phone" jdbcType="VARCHAR" property="servicePhone" />
    <result column="other_service" jdbcType="VARCHAR" property="otherService" />
    <result column="area_longitude" jdbcType="VARCHAR" property="areaLongitude" />
    <result column="area_latitude" jdbcType="VARCHAR" property="areaLatitude" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
  </resultMap>
 
 <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 19 18:04:28 CST 2015.
    -->
    bike_area_uid, bike_area_no, bike_area_name, area_rent_num, area_return_num, service_time, 
    area_on_duty, area_location, service_phone, other_service, area_longitude, area_latitude, 
    update_time, remark
  </sql>
 
    <select id="getBikeAreaList" parameterType="com.pudge.entity.bike.BikeArea" resultMap="BaseResultMap"> 
            SELECT (@curRow := @curRow + 1) AS row_number,
					<include refid="Base_Column_List" />   		 
            FROM 	bike_area ,(SELECT @curRow :=0) ROW_INDEX
            <where> 
			<if test="bikeAreaUid != null and bikeAreaUid != ''">  
         	AND 	bike_area_uid = #{bikeAreaUid}  
     		</if>
     		<if test="bikeAreaNo != null and bikeAreaNo != ''">  
         	AND 	bike_area_no = #{bikeAreaNo}  
     		</if>  
			<if test="updateTime != null and updateTime != ''">  
         	AND 	<![CDATA[ DATE_FORMAT(update_time,'%Y-%m-%d') >=DATE_FORMAT(#{updateTime},'%Y-%m-%d') ]]>
     		</if>
     		</where>
            ORDER 	BY update_time DESC
            <if test="rows != null and rows > 0">  
         	 LIMIT 	#{currentResult},#{rows}
     		</if>
           
    		<!-- LIMIT 	#{beginRow},#{length} -->
    </select> 
    
    <select id="getBikeAreaCount" parameterType="com.pudge.entity.bike.BikeArea" resultType="int">       
            SELECT 	COUNT(*)          		 
            FROM 	bike_area 
           <where> 
			<if test="bikeAreaUid != null and bikeAreaUid != ''">  
         	AND 	bike_area_uid = #{bikeAreaUid}  
     		</if>
     		<if test="bikeAreaNo != null and bikeAreaNo != ''">  
         	AND 	bike_area_no = #{bikeAreaNo}  
     		</if>  
			<if test="updateTime != null and updateTime != ''">  
         	AND 	<![CDATA[ DATE_FORMAT(update_time,'%Y-%m-%d') >=DATE_FORMAT(#{updateTime},'%Y-%m-%d') ]]>
     		</if>
     		</where>
    </select>
    
    
    <select id="getBikeArea" parameterType="com.pudge.entity.bike.BikeArea" resultType="com.pudge.entity.bike.BikeArea">  
            SELECT 
            <include refid="Base_Column_List" />
            FROM	bike_area 
            <where> 
			<if test="bikeAreaUid != null and bikeAreaUid != ''">  
         	AND 	bike_area_uid = #{bikeAreaUid}  
     		</if>
     		<if test="bikeAreaNo != null and bikeAreaNo != ''">  
         	AND 	bike_area_no = #{bikeAreaNo}  
     		</if>  
			<if test="updateTime != null and updateTime != ''">  
         	AND 	<![CDATA[ DATE_FORMAT(update_time,'%Y-%m-%d') >=DATE_FORMAT(#{updateTime},'%Y-%m-%d') ]]>
     		</if>
     		</where>
    </select>
    
    
    <insert id="insertBikeArea" parameterType="com.pudge.entity.bike.BikeArea">       
          insert into bike_area (bike_area_uid, bike_area_no, bike_area_name, 
      area_rent_num, area_return_num, service_time, 
      area_on_duty, area_location, service_phone, 
      other_service, area_longitude, area_latitude, 
      update_time, remark)
    values (#{bikeAreaUid,jdbcType=VARCHAR}, #{bikeAreaNo,jdbcType=VARCHAR}, #{bikeAreaName,jdbcType=VARCHAR}, 
      #{areaRentNum,jdbcType=INTEGER}, #{areaReturnNum,jdbcType=INTEGER}, #{serviceTime,jdbcType=VARCHAR}, 
      #{areaOnDuty,jdbcType=INTEGER}, #{areaLocation,jdbcType=VARCHAR}, #{servicePhone,jdbcType=VARCHAR}, 
      #{otherService,jdbcType=VARCHAR}, #{areaLongitude,jdbcType=VARCHAR}, #{areaLatitude,jdbcType=VARCHAR}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR})
    </insert>
    
    <update id="updateBikeArea" parameterType="com.pudge.entity.bike.BikeArea">       
    	update bike_area
    <set>
      <if test="bikeAreaNo != null">
        bike_area_no = #{bikeAreaNo,jdbcType=VARCHAR},
      </if>
      <if test="bikeAreaName != null">
        bike_area_name = #{bikeAreaName,jdbcType=VARCHAR},
      </if>
      <if test="areaRentNum != null">
        area_rent_num = #{areaRentNum,jdbcType=INTEGER},
      </if>
      <if test="areaReturnNum != null">
        area_return_num = #{areaReturnNum,jdbcType=INTEGER},
      </if>
      <if test="serviceTime != null">
        service_time = #{serviceTime,jdbcType=VARCHAR},
      </if>
      <if test="areaOnDuty != null">
        area_on_duty = #{areaOnDuty,jdbcType=INTEGER},
      </if>
      <if test="areaLocation != null">
        area_location = #{areaLocation,jdbcType=VARCHAR},
      </if>
      <if test="servicePhone != null">
        service_phone = #{servicePhone,jdbcType=VARCHAR},
      </if>
      <if test="otherService != null">
        other_service = #{otherService,jdbcType=VARCHAR},
      </if>
      <if test="areaLongitude != null">
        area_longitude = #{areaLongitude,jdbcType=VARCHAR},
      </if>
      <if test="areaLatitude != null">
        area_latitude = #{areaLatitude,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
    </set>
    where bike_area_uid = #{bikeAreaUid,jdbcType=VARCHAR}
    </update>
    
    <!-- 删除系统参数 -->
    <update id="deleteBikeArea" parameterType="String">       
       delete 
    	from 	bike_area
    	where  	bike_area_uid = #{bikeAreaUid}
    </update>
</mapper>